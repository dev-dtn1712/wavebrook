---
// Partner FAQ section actualizado para coincidir con el dise√±o
const faqs = [
  {
    id: 1,
    question: 'Who can become a partner?',
    answer:
      'Network operators, research firms, telecommunications companies, and data analytics organizations are ideal partners for Wavebrook.',
  },
  {
    id: 2,
    question: 'How does Wavebrook handle data privacy?',
    answer:
      'All data is anonymized and processed in compliance with global data protection regulations.',
  },
  {
    id: 3,
    question: 'How do I get started?',
    answer:
      'Contact our sales team to discuss partnership opportunities and integration requirements.',
  },
  {
    id: 4,
    question: 'Who can become a partner?',
    answer:
      'Network operators, research firms, telecommunications companies, and data analytics organizations are ideal partners for Wavebrook.',
  },
];
---

<section class='max-w-[90rem] m-auto pt-32 pb-24'>
  <div class='flex flex-col lg:flex-row lg:justify-between w-full gap-8 lg:gap-16 px-8'>
    <h2
      class='text-2xl sm:text-3xl md:text-4xl font-bold text-black mb-4 lg:mb-12 lg:flex-shrink-0'
    >
      Frequently Asked<br />Questions
    </h2>
    <div class='space-y-3 w-full lg:max-w-2xl'>
      {
        faqs.map(faq => (
          <div class='border border-gray-200 rounded-2xl bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200'>
            <button
              class='w-full px-4 sm:px-6 md:px-8 py-4 md:py-6 text-left flex items-center justify-between hover:bg-gray-50/50 transition-colors faq-button'
              data-faq={faq.id}
            >
              <span class='font-semibold text-gray-900 text-base sm:text-lg pr-2 sm:pr-4'>
                {faq.question}
              </span>
              <span class='w-6 h-6 sm:w-8 sm:h-8 rounded-full border-2 border-gray-300 bg-white flex items-center justify-center faq-icon transition-transform duration-300 flex-shrink-0'>
                <svg
                  class='w-3 h-3 sm:w-4 sm:h-4 text-gray-600'
                  fill='none'
                  stroke='currentColor'
                  viewBox='0 0 24 24'
                  stroke-width='2.5'
                >
                  <path stroke-linecap='round' stroke-linejoin='round' d='M12 6v12m6-6H6' />
                </svg>
              </span>
            </button>
            <div
              class='faq-content overflow-hidden transition-all duration-300 ease-out'
              style='max-height: 0;'
            >
              <div class='px-4 sm:px-6 md:px-8 pb-4 md:pb-6'>
                <p class='text-gray-600 !text-[14px] sm:text-base leading-relaxed'>{faq.answer}</p>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  // FAQ functionality
  document.addEventListener('DOMContentLoaded', function () {
    const faqButtons = document.querySelectorAll('.faq-button');

    faqButtons.forEach(button => {
      button.addEventListener('click', function (event) {
        const btn = event.currentTarget as HTMLElement | null;
        if (!btn) return;

        const content = btn.nextElementSibling as HTMLElement | null;
        const icon = btn.querySelector('.faq-icon') as HTMLElement | null;
        // Check if current FAQ is open (has maxHeight set and not 0)
        const isCurrentlyOpen = content?.style.maxHeight && content.style.maxHeight !== '0px';

        // Close all other FAQs first
        faqButtons.forEach(otherButton => {
          if (otherButton !== btn) {
            const otherContent = otherButton.nextElementSibling as HTMLElement | null;
            const otherIcon = otherButton.querySelector('.faq-icon') as HTMLElement | null;

            if (otherContent) {
              otherContent.style.maxHeight = '0px';
            }
            if (otherIcon) {
              otherIcon.style.transform = 'rotate(0deg)';
            }
          }
        });

        // Toggle current FAQ
        if (content && icon) {
          if (isCurrentlyOpen) {
            // Close current FAQ
            content.style.maxHeight = '0px';
            icon.style.transform = 'rotate(0deg)';
          } else {
            // Open current FAQ - set maxHeight to scrollHeight
            content.style.maxHeight = content.scrollHeight + 'px';
            icon.style.transform = 'rotate(45deg)';
          }
        }
      });
    });
  });
</script>
